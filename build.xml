<?xml version="1.0" encoding="UTF-8"?>
<project name="alloyui.com" default="local" xmlns:antelope="antlib:ise.antelope.tasks" basedir=".">

    <property name="root" value="." />

    <path id="lib.classpath">
      <fileset dir="lib" includes="*.jar" />
    </path>

    <taskdef classpathref="lib.classpath" resource="net/sf/antcontrib/antlib.xml" />
    <taskdef classpathref="lib.classpath" resource="ise/antelope/tasks/antlib.xml" uri="antlib:ise.antelope.tasks" />

    <target name="install">
      <echo>Installing DocPad</echo>
      <exec executable="docpad" dir="${root}">
        <arg value="install" />
      </exec>
    </target>

    <target name="generate">
      <echo>Generating DocPad</echo>
      <exec executable="docpad" dir="${root}">
        <arg value="generate --env static" />
      </exec>
    </target>

    <target name="run">
      <if>
        <not>
          <available file="${root}/node_modules" type="dir"/>
        </not>
        <then>
          <echo>Installing DocPad</echo>
          <exec executable="docpad" dir="${root}">
            <arg value="install" />
          </exec>
        </then>
      </if>
      <echo>Running DocPad</echo>
      <exec executable="docpad" dir="${root}">
        <arg value="run" />
      </exec>
    </target>

    <target name="deploy">
      <exec executable="sh" dir="${root}">
        <arg value="publish.sh" />
      </exec>
    </target>

    <target name="clean">
      <delete dir="node_modules" />
      <delete dir="out" />
    </target>

</project>